# 프로젝트 일지 



#### Server 1선 선발 : ) (2023/12/15)

 본격적인 팀매칭이 시작되었고, PM이 기획한 아이디어 중 마음에 드는 아이디어에 지원해, 해당 지원자들 중 PM이 원하는 개발자를 선택하는 방식이다. 많은 기획안들이 있었고 와이어 프레임이나 피그마만 봐도 PM들간 경험 차이가 확실히 드러났다. 누가봐 [2023-12-26-프로젝트 일지.md](2023-12-26-프로젝트 일지.md) 도 개발을 잘 알고, PM 역할로써 개발을 몇번 해본 사람들도 있는 반면, 정말 처음 도전해보는게 보이는 서투른 기획안들도 눈에 띄었다. 고민을 한 후 나는 '평생 교육기관 추천 웹사이트 - 올레'를 선택하였다. 서투르더라도 배우겠다는 마인드와 열정이 나와 닮았기 때문이다. 

큰 기대를 하지 않았지만 단 두명만 선택되는 1차 선발에 선발되었다. 우리 스터디 파트장님이 따로 축하 메세지를 보낼정도로 꽤나 선전한 것이다. 개발자로써, 1년동안 노력 대비 성장하고있나에 대한 의문이 많이 들었는데 내가 열심히 준비해놓은 포트폴리오나 공부가 그래도 헛수고가 아니었음을, 비전공자 개발자임에도 쟁쟁한 개발자 후보들 가운데서 인정받았다는 뿌듯함이 들었다. 





#### 첫 디코회의 (2023/12/26)

다음날 데모데이를 대비해 첫 디코회의를 했다. 서로 아직 얼굴도 보지 않았던 만큼 회의 분위기는 적막했고 PM은 내 생각보다 더 개발 분야에 대해 잘 몰라 소통이 어려웠다. 이전 같으면 이러한 분위기나 진행 속도에 답답함을 느껴 먼저 말을 많이 하는편이었다면, 이번엔 내 고집이나 생각에 사로잡히지 않고 꼼꼼히 생각한 후 꼭 필요한 질문만을 하려고 했다. 분위기는 언젠가 풀리겠지만 첫인상이 헛소리 가득하는 이미지로 남고 싶진 않았다. 

Actor 가 '회원'밖에 없다는 문제점이 의문스러워 질문했고 해당 기능은 아직은 염두해두고 있지 않다고 답변을 받았다. 서비스에 대한 평생 교육기관을 맞춤 추천해주는 서비스이지만 이러한 '추천'의 기능이 애매하다고 느꼈다. 챗봇의 활용 의미도 명확하지 않다. 교육기관,교육 공고를 등록하는 기능을 염두해두고 있지 않은 이상 '추천'쪽의 기능을 집중적으로 발전시켜야 할것이고 (필요하면 AI기능까지 활용해서 더욱 개인 맞춤형 기능을 강화해야한다), 그것이 아니면 actor에 선생님과  관리자를 추가하여 보다 큰 규모의 웹사이트를 만들지 않으면 큰 의미가 없을 것 같다. 개인적으로 첫번째 방향으로 나아가면 좋겠다. 





#### 두번째 회의 (2023/12/31)

마이크를 모두 끄고 있었고 각 파트별 회의가 따로 진행되진 않아 회의는 할게 없었다. 다만 PM 이 개발쪽을 아예...정말 너무 모르는게 큰일이었다. 애초에 프론트 기능과 백엔드 기능을 구분하지 못하고 세세한 세부사항은 전혀 확정되지 않았다. 기본적인 CRUD 개념도 모르는 것 같았다. 막막한 마음이 들었다. 





#### 첫 백엔드 회의 (2024/1/2)

백앤드 파트원들끼리 회의를 했다. 이전 내 프로젝트에서 진행한대로 다같이 하나하나 요구분석을 하기보다 각자 해오고, erd 까지 각자 그려보고 그걸 바탕으로 회의를 하자는 의견을 냈고 덕분에 회의는 빨리 끝났다. 프로젝트 경험자가 많이 없어 대략적인 프로젝트 일정 및 소요 시간을 이전 경험에 비추어 얘기해줬고 이를 바탕으로 일정을 잡았다. 





## 요구사항 분석 (2024/1/3 ~ 2024/1/4) 

 명세서 없이 피그마만 있는 상황이고 그 마저도 매우 부실해 마지못해 요구분석을 시작했다. 이런 기획안을 보고 요구분석을 하다보니 이미 완성되어있는 사이트를 보고 요구분석하는게 얼마나 편한것인지 실감했다. 





1차 제작본 

![제목 없는 다이어그램.drawio (12)](D:\Programming\github.io\images\2023-12-26-프로젝트 일지\제목 없는 다이어그램.drawio (12).png)



일단 사이트 흐름을 파악하는게 우선인 것 같아 User Diagram을 먼저 제작했다. 그래도 다행인 점은, 구현해야 할 기능이 많지 않아 개선할 수 있는 시간이 꽤 여유로울 것 같다는게 장점이다. 피그마를 분석하며 1차적으로 각 액터를 사용자, 회원,수강생, 선생님으로 잡고  큰 기능들을 확정했다. 







```bash
PM 님 안녕하세요 ! 요구분석하면서 헷갈리는 부분 여쭤봅니당

1. 수업 목록조회(검색) 기준으로 인기순 조회, 지금 막 뜬 교육, 검색어 검색, 이렇게 3가지 있는거 맞나요 ? (카테고리별 검색은 따로 없는건가요?)
+ 그리고 각 검색 기준별 정확히 어떤 데이터로 집계하는건지도 확정 부탁드려요! (조회수? 신청자수? 최신등록순? ) 

2. 카테고리는 메인 페이지에 그려져 있는 6가지로 확정인가요? 
(스마트폰, 컴퓨터, 키오스크, 외국어, 운동, 공예) 

3. 카테고리별로 설문조사 질문이 다른가요 (ex 스마트폰 -> 앱설치, 카메라, 갤러리, 환경설정)?  그럼 카테고리별 설문 내용 확정 부탁드려요! 그래야 세부 카테고리 등으로 설정할 듯 싶어요!

4. 상세조회 페이지는 로그인 안해도 조회 가능한가요? 아님 로그인 해야 들어갈 수 있나요?  상세조회...가 페이지 디자인도 이미 했고 메인 기능 중 하나 같은데 MVP에 포함 안되는건가용? (MVP 완료 후 추가기능 목록에도 없어서 여쭤봐요!) 

5. 회원 가입에서 sns 간편 가입 시 어느 페이지로 넘어가나요? 회원 가입 아예 완료인가요? 
( sns 간편 가입이라도 추가적으로 입력해야하는 정보가 있는지 궁금합니다 ex) 주소 , 이메일 수신동의 등  ) 

6. 이메일 수신 여부, 문자 수신 여부는 회원 가입 당시엔 설정안하는건가요? 마이페이지에는 있는데 회원가입 쪽 피그마에는 없어서 여쭤봐요! 그럼 default로 어떻게 설정되나요? (수신동의? 수신거부?) 

```

그 후 요구사항 분석하며 모호한 부분, 확정되어야할 세부사항 목록을 정리하여 백엔드 단톡방에 올렸다. 요구분석 관련 질문 사항은 단톡방에 올려 답변받아야 동일한 문제로 고민할 일이 없을 것 같아 백엔드 회의 당시 단톡방에 올리자고 제안했다. 







```bash
생략한 질문 !

(+ 카테고리 아이콘 누르면 설문조사로 넘어가는 것 맞나요? 개인적 생각인데.... 저 아이콘들 통상적으로 카테고리별 검색에서 쓰이는거랑 똑같아서 헷갈릴 것 같아요...  그냥 저 아이콘은 카테고리별 검색으로 두고, 설문조사 참여는 배너를 띄워서 유도하거나 다른 버튼으로 수정하는게 어떨까 싶어요..! 그리고 카테고리는 설문지 내에서 선택하는게 나을 것 같아요..! ) 
--> 이미 수정하기엔 너무 큰 영역이고 오지랖같음
```

이번엔 토익, 코테, 취준 등 병행해야할 것 같아 프로젝트에 투자하는 시간을 명확히 정했다. 이전처럼 올인할때보다 훨씬 마음이 가볍고 편하다. 예전같으면 어떻게든 좋은 결과물을 내려고 나 혼자 아등바등, 목숨걸고 하는 편이었다면 이번엔 내가 상처받지 않는 한, 내가 지쳐서 나가떨어지지 않는 그 한계점을 명확히 인식하고, 그 한계내의  시간동안만 최선을 다했다. 이렇게 아니 내 생활과의 균형도 어느정도 맞춰지고 여유가 생겼다. 다른 사람을 이끌어야한다는 압박도 거의 느껴지지 않는다. 뿐만 아니라, 저번 프로젝트들의 경험으로 내가 맞다고 믿고있는게 틀릴 수 있고 내 생각에 빠져있을 위험성도 배웠기 때문에, 의견 제시할때 강하게, 오버해서 고집을 부리지 않게 되었다. 이러한 자세는 중요한데, 왜냐면 의견 하나하나가 이미지고 말도 안되는 억지를 부리다보면 나중엔 괜찮은 의견도 무시될 가능성이 크다. 그렇기에 꼭 필요한 의견제시만 하는게 낫다. 나아가 피드백 수용도 훨씬 수월하게 되었다. 조금 부족한 완성품일지라도 나 자신을 잃어버리는 선택은 하지 않고 적당한 노력을 기울일 것이다. 





## ERD 설계 









## API 설계 







## 프로젝트 아키텍쳐 설계 

* 프로젝트 생성 
* 개발 Convention 정하기
* DB연결
* 개발환경 세팅



![image-20240117140414864](D:\Programming\github.io\images\2023-12-26-프로젝트 일지\image-20240117140414864.png)





#### 트러블 슈팅 (01/17)



**문제: 내용 없이 패키지만 생성하면 commit 대상이 되지 못하고 반영되지 않는다**

* 원인 : Git 에서는 커밋을 단순화하고 속도를 빠르게 하기 위해 내용물을 파일 단위로 관리하고 디렉토리 정보는 해당 파일에 연관된 정보로 해석하기 때문에, 파일이 없는 빈 파일은 추가 및 커밋을 할 수 없다. 

* 해결방안 : 각 디렉터리에 '더미 파일' 생성 

--> 더미파일 컨밴션 : .gitkeep / dummy.txt 



* 의문 : 프로젝트 생성 한 후 패키지 구조 설계 후 최초 push할 때도 빈폴더는 반영X ?  





**Swagger와 Spring security를 같이 사용하니 Swagger 페이지에 들어가려 하자 아래와 같이 로그인 페이지가 뜬다 **

![image-20240117144600192](D:\Programming\github.io\images\2023-12-26-프로젝트 일지\image-20240117144600192.png)



* 해결 방법 1 : 아이디로 user, 비밀번호로 서버실행시 시큐리티가 부여해주는 암호화된 비밀번호를 입력한다

  

  





**에러: mappedBy reference an unknown target entity property**

* 원인 : 엔티티의 연관관계가 잘못되었을 대 생기는 문제 

* 해결 : mapping되는 연관관계의 주인에서 현재 클래스 파일을 사용하는 이름을 그대로 참조해야 함  





**에러: CommandAcceptanceException: Error executing DDLYou have an error in your SQL syntax; **

* 원인 : 'currentTime'이라는 필드가 있는데 이는 mysql의 예약어와 이름이 같다  
* 해결 : 필드명을 바꿔준다 





##### 경고 : no data source are configured to run this sql / sql dialect is not configured

* 상황 : data.sql 파일을 추가하자 뜨는 경고
* 해결 : 무시해도 큰 상관 없다 





### 추천 알고리즘 연구

* 추천 알고리즘엔 대표적으로 컨텐츠 기반 추천 시스템, 협업 필터링, 이 두가지 방식을 합친 하이브리드 추천시스템이 있다. 

* 사용자가 입력한 몇가지 조건을 고려해 최적의 선택지를 내놓는 알고리즘은 '컨텐츠 기반 추천 시스템'에 해당한다. 

* 컨텐츠 기반 추천 시스템

  : 사용자 혹은 아이템에 대한 세부 정보를 활용해 사용자가 선호했던 선택지와 비슷한 유형의 선택지를 추천한다 

* 다른 말로, '컨텐츠 기반 필터링'이라고도 불린다
* 물론 근본적으로 컨텐츠 기반 추천 시스템은 '이전에 사용자가 좋다고 판단한 선택지'의 세부 특성을 추출하여 이와 유사한 아이템을 매치하는 방식이지만, 이러한 세부 특성을 사용자로부터 직접 받는다는 관점으로 바꾼다면 이러한 상황에도 적용할 수 있을것이라 판단된다. 



#### 구현 방식

1. 이미지, 음성, 태그, 상품 설명서, 리뷰 등과 같은 아이템의 설명으로부터 아이템의 특징을 추출합니다.

​	-> 이번의 경우 해당 특징을 직접 사용자가 선택한 조건으로써 전달 받는다 

2. 알고리즘을 이용해 유사한 아이템들을 선별한다  

   -> 알고리즘이 반영되는 부분 : '유사 컨텐츠 파악' -> 유사성을 무엇으로 파악하고 어떻게 계산? 

    

3. 평점, 인기도 등 특정 칼럼을 기준으로 해당 아이템들을 나열한다 



#### 유사성 

* 백터간 유사도 계산을 통해 알고리즘을 계산한다 




##### 에러 : Could not find class file for 'com.example.olebackend.domain.mapping.LectureTeacher'. 

* 문제상황 : Query DSL 설정하니 Entity 파일들을 못찾는다  
* 원인 : 

[query dsl 파일 중복생성, 파일을 찾지 못하는오류 (tistory.com)](https://lahezy.tistory.com/94)





##### 에러: Transaction silently rolled back because it has been marked as rollback-only

* 문제 상황 : Query DSL 코드에 distinct()를 추가했더니 오류가 남 

```java
 .selectFrom(lesson).distinct()
                .leftJoin(lesson.subCategory, subCategory)
                .leftJoin(lesson.lectureTeacherList, lectureTeacher)
                .leftJoin(lectureTeacher.teacher, teacher)
                .where(subcategoryEq(condition.getSub_categoryIds()),
                        lessonTypeEq(condition.getClassType()))
                .orderBy(teacher_gender_order(condition.getTeacher_gender()))
                .fetch() ;
```





##### list 가 비어있는지 여부를 null로 체크해서 오류 

기존 : if (subCategories == null){ 

수정 : if (subCategories.isEmpty()) {







![image-20240124113105380](D:\Programming\github.io\images\2023-12-26-프로젝트 일지\image-20240124113105380.png)

[[JAVA\] 날짜 비교하기(Date, Calendar, LocalDate, LocalDateTime) (tistory.com)](https://hajoung56.tistory.com/67)







org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute statement

=> 테이블 이름을 MYSQL 연산자인 'LIKE'로 사용하여 발생하는 문제 





##### 에러 : Communications link failure

* 데이터베이스(MySQL)와 연결이 실패해서 생기는 문제 

* 원인 : 수동 배포 후 DB를 로컬 DB가 아닌 RDS 로 바꿔 application.yml 파일에 db 경로가 바뀌어 있다 

  --> url: jdbc:mysql://oledb.cshzc9vullbx.ap-northeast-2.rds.amazonaws.com/ole?serverTimezone=Asia/Seoul&characterEncoding=UTF-8

* 해결 : RDS 커넥션 설정을 새롭게 해줘야한다. 





##### 에러 : 칼럼명을 인식하지 못하는 오류 

* 원인

  ```
  hbm2ddl:
    auto: none
  ```

* 해결 : create-drop로 바꿔주니 해결 왜지?? 





##### 에러 : No Such Element 

문제 : categoryId만 다르게 주고 동일한 memberId로 Member테이블에서 조회를 했는데 한쪽 카테고리에선 조회가 안됨 , Member 테이블 조회는 category값과 상관없는거 아닌가? 

접근 : log로 넘어오는 memberId값을 확인한다

=> 카테고리 id로 넘어와야하는 값이 memberId로 넘어온다 

![image-20240211114449560](D:\Programming\github.io\images\2023-12-26-프로젝트 일지\image-20240211114449560.png)



원인 : 매개변수는 (카테고리아이디, 멤버아이디)인데 컨트롤러에서 두 순서를 바꿔서 넘겨준다

![image-20240211114415554](D:\Programming\github.io\images\2023-12-26-프로젝트 일지\image-20240211114415554.png)

![image-20240211114401838](D:\Programming\github.io\images\2023-12-26-프로젝트 일지\image-20240211114401838.png)

